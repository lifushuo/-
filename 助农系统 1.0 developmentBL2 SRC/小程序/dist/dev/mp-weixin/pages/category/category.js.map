{"version":3,"file":"category.js","sources":["../../../../../src/pages/category/category.vue","../../../../../uniPage:/cGFnZXMvY2F0ZWdvcnkvY2F0ZWdvcnkudnVl"],"sourcesContent":["<script setup lang=\"ts\">\n//\n\n// 获取轮播图数据\nimport { computed, ref } from 'vue'\nimport type { BannerItem } from '@/types/home'\nimport { getHomeBannerAPI } from '@/services/home'\nimport { onLoad } from '@dcloudio/uni-app'\nimport { getCategoryTopAPI } from '@/services/category'\nimport type { CategoryTopItem } from '@/types/category'\nimport PageSkeleton from '@/pages/category/component/PageSkeleton.vue'\n\nconst bannerList = ref<BannerItem[]>([])\n\n//获取广告数据\nconst getBannerData = async () => {\n    const res = await getHomeBannerAPI(2)\n    bannerList.value = res.result\n    console.log(res.result)\n    console.log(bannerList.value)\n}\n// 高亮下标\nconst activeIndex = ref(0)\n// 分类目录\nconst categoryList = ref<CategoryTopItem[]>([])\n// 获取分类数据\nconst getCategoryTopData = async () => {\n    const res = await getCategoryTopAPI()\n    categoryList.value = res.data\n    console.log('getCategoryTopData')\n    console.log(categoryList.value)\n}\nconst subCategoryList = computed(() => {\n    return categoryList.value[activeIndex.value]?.children || []\n})\n\nconst isTrigger = ref<boolean>(false)\n\n// 页面加载\nonLoad(async () => {\n    isTrigger.value = true\n    await Promise.all([getBannerData(), getCategoryTopData()])\n    isTrigger.value = false\n})\n</script>\n\n<template>\n    <PageSkeleton v-if=\"isTrigger\"></PageSkeleton>\n    <view class=\"viewport\" v-else>\n        <!-- 搜索框 -->\n        <view class=\"search\">\n            <uni-search-bar placeholder=\"大米\" />\n            <!--            <view class=\"input\">-->\n            <!--                <text class=\"icon-search\">女靴</text>-->\n            <!--            </view>-->\n        </view>\n        <!-- 分类 -->\n        <view class=\"categories\">\n            <!-- 左侧：一级分类 -->\n            <scroll-view class=\"primary\" :scroll-y=\"true\">\n                <view\n                    v-for=\"(item, index) in categoryList\"\n                    :key=\"index\"\n                    class=\"item\"\n                    :class=\"{ active: index === activeIndex }\"\n                    @tap=\"() => (activeIndex = index)\"\n                >\n                    <text class=\"name\"> {{ item.name }}</text>\n                </view>\n            </scroll-view>\n            <!-- 右侧：二级分类 -->\n            <scroll-view class=\"secondary\" :scroll-y=\"true\">\n                <!-- 焦点图 -->\n                <!--                <XtxSwiper class=\"banner\" :list=\"bannerList\" />-->\n                <!-- 内容区域 -->\n                <view class=\"panel\" v-for=\"(item, index) in subCategoryList\" :key=\"index\">\n                    <view class=\"title\">\n                        <text class=\"name\">{{ item.name }}</text>\n                        <navigator class=\"more\" hover-class=\"none\">全部</navigator>\n                    </view>\n                    <view class=\"section\">\n                        <navigator\n                            v-for=\"goods in item.goods\"\n                            :key=\"goods.id\"\n                            class=\"goods\"\n                            hover-class=\"none\"\n                            :url=\"`/pages/goods/goods?id=${goods.id}`\"\n                        >\n                            <image class=\"image\" :src=\"goods.picture\"></image>\n                            <view class=\"name ellipsis\">{{ goods.name }}</view>\n                            <view class=\"price\">\n                                <text class=\"symbol\">¥</text>\n                                <text class=\"number\">{{ goods.price }}</text>\n                            </view>\n                        </navigator>\n                    </view>\n                </view>\n            </scroll-view>\n        </view>\n    </view>\n</template>\n\n<style lang=\"scss\">\npage {\n    height: 100%;\n    overflow: hidden;\n}\n\n.viewport {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n.search {\n    padding: 0 30rpx 20rpx;\n    background-color: #fff;\n\n    .input {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        height: 64rpx;\n        padding-left: 26rpx;\n        color: #8b8b8b;\n        font-size: 28rpx;\n        border-radius: 32rpx;\n        background-color: #f3f4f4;\n    }\n}\n\n.icon-search {\n    &::before {\n        margin-right: 10rpx;\n    }\n}\n\n/* 分类 */\n.categories {\n    flex: 1;\n    min-height: 400rpx;\n    display: flex;\n}\n\n/* 一级分类 */\n.primary {\n    overflow: hidden;\n    width: 180rpx;\n    flex: none;\n    background-color: #f6f6f6;\n\n    .item {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 96rpx;\n        font-size: 26rpx;\n        color: #595c63;\n        position: relative;\n\n        &::after {\n            content: '';\n            position: absolute;\n            left: 42rpx;\n            bottom: 0;\n            width: 96rpx;\n            border-top: 1rpx solid #e3e4e7;\n        }\n    }\n\n    .active {\n        background-color: #fff;\n\n        &::before {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 0;\n            width: 8rpx;\n            height: 100%;\n            background-color: #27ba9b;\n        }\n    }\n}\n\n.primary .item:last-child::after,\n.primary .active::after {\n    display: none;\n}\n\n/* 二级分类 */\n.secondary {\n    background-color: #fff;\n\n    .carousel {\n        height: 200rpx;\n        margin: 0 30rpx 20rpx;\n        border-radius: 4rpx;\n        overflow: hidden;\n    }\n\n    .panel {\n        margin: 0 30rpx 0;\n    }\n\n    .title {\n        height: 60rpx;\n        line-height: 60rpx;\n        color: #333;\n        font-size: 28rpx;\n        border-bottom: 1rpx solid #f7f7f8;\n\n        .more {\n            float: right;\n            padding-left: 20rpx;\n            font-size: 24rpx;\n            color: #999;\n        }\n    }\n\n    .more {\n        &::after {\n            font-family: 'erabbit' !important;\n            content: '\\e6c2';\n        }\n    }\n\n    .section {\n        width: 100%;\n        display: flex;\n        flex-wrap: wrap;\n        padding: 20rpx 0;\n\n        .goods {\n            width: 150rpx;\n            margin: 0rpx 30rpx 20rpx 0;\n\n            &:nth-child(3n) {\n                margin-right: 0;\n            }\n\n            image {\n                width: 150rpx;\n                height: 150rpx;\n            }\n\n            .name {\n                padding: 5rpx;\n                font-size: 22rpx;\n                color: #333;\n            }\n\n            .price {\n                padding: 5rpx;\n                font-size: 18rpx;\n                color: #cf4444;\n            }\n\n            .number {\n                font-size: 24rpx;\n                margin-left: 2rpx;\n            }\n        }\n    }\n}\n</style>\n","import MiniProgramPage from 'D:/OneDrive/桌面/uniapp小程序小兔/erabbit-uni-app-vue3-ts-master/src/pages/category/category.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeBannerAPI","getCategoryTopAPI","computed","onLoad"],"mappings":";;;;;;;;;;;;;;;AAUA,MAAA,eAAyB,MAAA;;;;AAEnB,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AAGvC,UAAM,gBAAgB,YAAY;AACxB,YAAA,MAAM,MAAMC,+BAAiB,CAAC;AACpC,iBAAW,QAAQ,IAAI;AACf,cAAA,IAAI,IAAI,MAAM;AACd,cAAA,IAAI,WAAW,KAAK;AAAA,IAAA;AAG1B,UAAA,cAAcD,kBAAI,CAAC;AAEnB,UAAA,eAAeA,kBAAuB,CAAA,CAAE;AAE9C,UAAM,qBAAqB,YAAY;AAC7B,YAAA,MAAM,MAAME,kBAAAA;AAClB,mBAAa,QAAQ,IAAI;AACzB,cAAQ,IAAI,oBAAoB;AACxB,cAAA,IAAI,aAAa,KAAK;AAAA,IAAA;AAE5B,UAAA,kBAAkBC,cAAAA,SAAS,MAAM;;AACnC,eAAO,kBAAa,MAAM,YAAY,KAAK,MAApC,mBAAuC,aAAY;IAAC,CAC9D;AAEK,UAAA,YAAYH,kBAAa,KAAK;AAGpCI,kBAAAA,OAAO,YAAY;AACf,gBAAU,QAAQ;AAClB,YAAM,QAAQ,IAAI,CAAC,iBAAiB,mBAAoB,CAAA,CAAC;AACzD,gBAAU,QAAQ;AAAA,IAAA,CACrB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1CD,GAAG,WAAW,eAAe;"}