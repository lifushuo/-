{"version":3,"file":"index.js","sources":["../../../../../src/pages/index/index.vue","../../../../../uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<script setup lang=\"ts\">\n//\nimport CustomNavbar from './components/CustomNavbar.vue'\nimport XtxSwiper from '@/components/XtxSwiper.vue'\nimport CategoryPanel from '@/pages/index/components/CategoryPanel.vue'\nimport HotPanel from '@/pages/index/components/HotPanel.vue'\nimport PageSkeleton from '@/pages/index/components/PageSkeleton.vue'\n\nimport { nextTick, ref } from 'vue'\nimport { getHomeBannerAPI, getHomeCategoryAPI, getHomeHotAPI } from '@/services/home'\nimport { onLoad } from '@dcloudio/uni-app'\nimport type { BannerItem, CategoryItem, HotItem } from '@/types/home'\nimport XtxGuess from '@/components/XtxGuess.vue'\nimport type { XtxGuessInstance } from '@/types/component'\nimport { useGuessList } from '@/composables'\nimport Hot from '@/pages/hot/hot.vue'\n\nconst bannerList = ref<BannerItem[]>([])\nconst categoryList = ref<CategoryItem[]>([])\nconst getHomeBannerData = async () => {\n    // let result = await getHomeBannerAPI(1)\n    // bannerList.value = result.result\n    bannerList.value = [\n        {\n            imgUrl: 'https://www.2008php.com/2020_Website_appreciate/2020-02-29/20200229221059.jpg',\n            id: '',\n            hrefUrl: '',\n            type: 0,\n        },\n        {\n            imgUrl: 'https://photo.16pic.com/00/61/17/16pic_6117697_b.jpg',\n            id: '',\n            hrefUrl: '',\n            type: 0,\n        },\n        {\n            imgUrl: 'https://img.zhisheji.com/fxapi/fximg/4c8e194bbd580c4470dd78ccba5717b2.jpg',\n            id: '',\n            hrefUrl: '',\n            type: 0,\n        },\n        {\n            imgUrl: 'https://img.zcool.cn/community/0170f2560e37fb6ac7251df8efa697.jpg',\n            id: '',\n            hrefUrl: '',\n            type: 0,\n        },\n    ]\n}\n\nconst getHomeCategory = async () => {\n    let result = await getHomeCategoryAPI()\n    categoryList.value = result.result\n}\n\n// 主页 热门推荐\nlet hotPanelList = ref<HotItem[]>([])\nconst getHomeHotPanel = async () => {\n    let result = await getHomeHotAPI()\n    hotPanelList.value = result.result\n    // console.log(hotPanelList.value)\n}\n\nconst isLoading = ref<Boolean>(true)\n\nonLoad(async () => {\n    isLoading.value = true\n    await Promise.all([getHomeBannerData(), getHomeCategory(), getHomeHotPanel()])\n\n    isLoading.value = false\n})\nconst { guessRef, onScrolltolower } = useGuessList()\n\nlet isTriggered = ref(false)\nconst onRefresherrefresh = async () => {\n    // 开始动画\n    isTriggered.value = true\n    // 重置 猜你喜欢 数据\n    guessRef.value?.resetData()\n    await Promise.all([getHomeBannerData(), getHomeCategory(), getHomeHotPanel()])\n    //关闭动画\n    // console.log(isTriggered.value)\n    isTriggered.value = false\n    // // console.log(isTriggered.value)\n    // hotFresh.value = false\n    // nextTick()\n    // hotFresh.value = true\n    console.log(hotRef.value)\n    hotRef.value.getNewData()\n}\n\nlet hotRef = ref()\n</script>\n\n<template>\n    <CustomNavbar />\n\n    <scroll-view\n        class=\"scroll-view\"\n        :scroll-y=\"true\"\n        :refresher-enabled=\"true\"\n        :refresher-triggered=\"isTriggered\"\n        @scrolltolower=\"onScrolltolower\"\n        @refresherrefresh=\"onRefresherrefresh\"\n    >\n        <PageSkeleton v-if=\"isLoading\" />\n        <template v-else>\n            <!--  // 轮滑图-->\n            <XtxSwiper :list=\"bannerList\" />\n            <!--  // 分类面板-->\n            <!--            <CategoryPanel :list=\"categoryList\" />-->\n            <!--  //热门 推荐-->\n            <!--            <HotPanel :list=\"hotPanelList\" />-->\n            <Hot type=\"1\" ref=\"hotRef\" />\n        </template>\n    </scroll-view>\n</template>\n\n<style lang=\"scss\">\npage {\n    background-color: #f7f7f7f7;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n\n    .scroll-view {\n        flex: 1;\n    }\n}\n\n.uni-margin-wrap {\n    height: 690rpx;\n    width: 100%;\n}\n\n.swiper {\n    height: 300rpx;\n}\n\n.swiper-item {\n    display: block;\n    height: 300rpx;\n    line-height: 300rpx;\n    text-align: center;\n}\n\n.swiper-list {\n    margin-top: 40rpx;\n    margin-bottom: 0;\n}\n\n.uni-common-mt {\n    margin-top: 60rpx;\n    position: relative;\n}\n\n.info {\n    position: absolute;\n    right: 20rpx;\n}\n\n.uni-padding-wrap {\n    width: 550rpx;\n    padding: 0 100rpx;\n}\n</style>\n","import MiniProgramPage from 'D:/OneDrive/桌面/uniapp小程序小兔/erabbit-uni-app-vue3-ts-master/src/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getHomeCategoryAPI","getHomeHotAPI","onLoad","useGuessList"],"mappings":";;;;;;;;;;AAEA,MAAA,eAAyB,MAAA;AACzB,MAAA,YAAsB,MAAA;AAGtB,MAAA,eAAyB,MAAA;AASzB,MAAA,MAAgB,MAAA;;;;AAEV,UAAA,aAAaA,kBAAkB,CAAA,CAAE;AACjC,UAAA,eAAeA,kBAAoB,CAAA,CAAE;AAC3C,UAAM,oBAAoB,YAAY;AAGlC,iBAAW,QAAQ;AAAA,QACf;AAAA,UACI,QAAQ;AAAA,UACR,IAAI;AAAA,UACJ,SAAS;AAAA,UACT,MAAM;AAAA,QACV;AAAA,QACA;AAAA,UACI,QAAQ;AAAA,UACR,IAAI;AAAA,UACJ,SAAS;AAAA,UACT,MAAM;AAAA,QACV;AAAA,QACA;AAAA,UACI,QAAQ;AAAA,UACR,IAAI;AAAA,UACJ,SAAS;AAAA,UACT,MAAM;AAAA,QACV;AAAA,QACA;AAAA,UACI,QAAQ;AAAA,UACR,IAAI;AAAA,UACJ,SAAS;AAAA,UACT,MAAM;AAAA,QACV;AAAA,MAAA;AAAA,IACJ;AAGJ,UAAM,kBAAkB,YAAY;AAC5B,UAAA,SAAS,MAAMC,cAAAA;AACnB,mBAAa,QAAQ,OAAO;AAAA,IAAA;AAI5B,QAAA,eAAeD,kBAAe,CAAA,CAAE;AACpC,UAAM,kBAAkB,YAAY;AAC5B,UAAA,SAAS,MAAME,cAAAA;AACnB,mBAAa,QAAQ,OAAO;AAAA,IAAA;AAI1B,UAAA,YAAYF,kBAAa,IAAI;AAEnCG,kBAAAA,OAAO,YAAY;AACf,gBAAU,QAAQ;AACZ,YAAA,QAAQ,IAAI,CAAC,kBAAA,GAAqB,mBAAmB,gBAAiB,CAAA,CAAC;AAE7E,gBAAU,QAAQ;AAAA,IAAA,CACrB;AACD,UAAM,EAAE,UAAU,gBAAgB,IAAIC,kBAAa,aAAA;AAE/C,QAAA,cAAcJ,kBAAI,KAAK;AAC3B,UAAM,qBAAqB,YAAY;;AAEnC,kBAAY,QAAQ;AAEpB,qBAAS,UAAT,mBAAgB;AACV,YAAA,QAAQ,IAAI,CAAC,kBAAA,GAAqB,mBAAmB,gBAAiB,CAAA,CAAC;AAG7E,kBAAY,QAAQ;AAKZ,cAAA,IAAI,OAAO,KAAK;AACxB,aAAO,MAAM;IAAW;AAG5B,QAAI,SAASA,cAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AC1Fb,GAAG,WAAW,eAAe;"}