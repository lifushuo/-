{"version":3,"file":"address.js","sources":["../../../../../src/pagesMember/address/address.vue","../../../../../uniPage:/cGFnZXNNZW1iZXJcYWRkcmVzc1xhZGRyZXNzLnZ1ZQ"],"sourcesContent":["<script setup lang=\"ts\">\n//\nimport { deleteMemberAddressByIdAPI, getMemberAddressAPI } from '@/services/address'\nimport type { AddressItem } from '@/types/address'\nimport { onShow } from '@dcloudio/uni-app'\nimport { ref } from 'vue'\nimport { useAddressStore } from '@/stores/modules/address'\n\n// 获取收货地址列表数据\nconst addressList = ref<AddressItem[]>([])\nconst getMemberAddressData = async () => {\n    const res = await getMemberAddressAPI()\n    addressList.value = res.data\n}\n// 删除收货地址\nconst onDeleteAddress = (id: string) => {\n    // 二次确认\n    uni.showModal({\n        content: '删除地址?',\n        success: async (res) => {\n            if (res.confirm) {\n                // 根据id删除收货地址\n                await deleteMemberAddressByIdAPI(id)\n                // 重新获取收货地址列表\n                getMemberAddressData()\n            }\n        },\n    })\n}\n// 初始化调用(页面显示)\nonShow(() => {\n    getMemberAddressData()\n})\n\nconst addressStore = useAddressStore()\n\nconst onChangeAddress = (item: AddressItem) => {\n    addressStore.changeSelectedAddress(item)\n    uni.navigateBack()\n}\n</script>\n\n<template>\n    <view class=\"viewport\">\n        <!-- 地址列表 -->\n        <scroll-view class=\"scroll-view\" scroll-y>\n            <view v-if=\"addressList.length\" class=\"address\">\n                <uni-swipe-action class=\"address-list\">\n                    <!-- 收货地址项 -->\n                    <uni-swipe-action-item class=\"item\" v-for=\"item in addressList\" :key=\"item.id\">\n                        <view class=\"item-content\" @tap=\"onChangeAddress(item)\">\n                            <view class=\"user\">\n                                {{ item.receiver }}\n                                <text class=\"contact\">{{ item.contact }}</text>\n                                <text v-if=\"item.isDefault\" class=\"badge\">默认</text>\n                            </view>\n                            <view class=\"locate\">{{ item.fullLocation }} {{ item.address }}</view>\n                            <navigator\n                                class=\"edit\"\n                                hover-class=\"none\"\n                                @tap.stop=\"\"\n                                :url=\"`/pagesMember/address-form/address-form?id=${item.id}`\"\n                            >\n                                修改\n                            </navigator>\n                        </view>\n                        <!-- 右侧插槽 -->\n                        <template #right>\n                            <button @tap=\"onDeleteAddress(item.id)\" class=\"delete-button\">\n                                删除\n                            </button>\n                        </template>\n                    </uni-swipe-action-item>\n                </uni-swipe-action>\n            </view>\n            <view v-else class=\"blank\">暂无收货地址</view>\n        </scroll-view>\n        <!-- 添加按钮 -->\n        <view class=\"add-btn\">\n            <navigator hover-class=\"none\" url=\"/pagesMember/address-form/address-form\">\n                新建地址\n            </navigator>\n        </view>\n    </view>\n</template>\n<style lang=\"scss\">\npage {\n    height: 100%;\n    overflow: hidden;\n}\n\n/* 删除按钮 */\n.delete-button {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 50px;\n    height: 100%;\n    font-size: 28rpx;\n    color: #fff;\n    border-radius: 0;\n    padding: 0;\n    background-color: #cf4444;\n}\n\n.viewport {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    background-color: #f4f4f4;\n\n    .scroll-view {\n        padding-top: 20rpx;\n    }\n}\n\n.address {\n    padding: 0 20rpx;\n    margin: 0 20rpx;\n    border-radius: 10rpx;\n    background-color: #fff;\n\n    .item-content {\n        line-height: 1;\n        padding: 40rpx 10rpx 38rpx;\n        border-bottom: 1rpx solid #ddd;\n        position: relative;\n\n        .edit {\n            position: absolute;\n            top: 36rpx;\n            right: 30rpx;\n            padding: 2rpx 0 2rpx 20rpx;\n            border-left: 1rpx solid #666;\n            font-size: 26rpx;\n            color: #666;\n            line-height: 1;\n        }\n    }\n\n    .item:last-child .item-content {\n        border: none;\n    }\n\n    .user {\n        font-size: 28rpx;\n        margin-bottom: 20rpx;\n        color: #333;\n\n        .contact {\n            color: #666;\n        }\n\n        .badge {\n            display: inline-block;\n            padding: 4rpx 10rpx 2rpx 14rpx;\n            margin: 2rpx 0 0 10rpx;\n            font-size: 26rpx;\n            color: #27ba9b;\n            border-radius: 6rpx;\n            border: 1rpx solid #27ba9b;\n        }\n    }\n\n    .locate {\n        line-height: 1.6;\n        font-size: 26rpx;\n        color: #333;\n    }\n}\n\n.blank {\n    margin-top: 300rpx;\n    text-align: center;\n    font-size: 32rpx;\n    color: #888;\n}\n\n.add-btn {\n    height: 80rpx;\n    text-align: center;\n    line-height: 80rpx;\n    margin: 30rpx 20rpx;\n    color: #fff;\n    border-radius: 80rpx;\n    font-size: 30rpx;\n    background-color: #27ba9b;\n}\n</style>\n","import MiniProgramPage from 'D:/OneDrive/桌面/uniapp小程序小兔/erabbit-uni-app-vue3-ts-master/src/pagesMember/address/address.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","getMemberAddressAPI","uni","deleteMemberAddressByIdAPI","onShow","useAddressStore"],"mappings":";;;;;;;;;;;;;;;;;;;;AASM,UAAA,cAAcA,kBAAmB,CAAA,CAAE;AACzC,UAAM,uBAAuB,YAAY;AAC/B,YAAA,MAAM,MAAMC,iBAAAA;AAClB,kBAAY,QAAQ,IAAI;AAAA,IAAA;AAGtB,UAAA,kBAAkB,CAAC,OAAe;AAEpCC,oBAAAA,MAAI,UAAU;AAAA,QACV,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACpB,cAAI,IAAI,SAAS;AAEb,kBAAMC,iBAAAA,2BAA2B,EAAE;AAEd;UACzB;AAAA,QACJ;AAAA,MAAA,CACH;AAAA,IAAA;AAGLC,kBAAAA,OAAO,MAAM;AACY;IAAA,CACxB;AAED,UAAM,eAAeC,uBAAAA;AAEf,UAAA,kBAAkB,CAAC,SAAsB;AAC3C,mBAAa,sBAAsB,IAAI;AACvCH,oBAAA,MAAI,aAAa;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrCrB,GAAG,WAAW,eAAe;"}